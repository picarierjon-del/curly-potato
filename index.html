<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ErjonPro - Registro Gestionale</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body { background-color: #f3f4f6; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }
        .card { background: white; border-radius: 12px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin-bottom: 1rem; padding: 1rem; }
        .input-group { margin-bottom: 0.75rem; }
        label { display: block; font-size: 0.875rem; color: #4b5563; margin-bottom: 0.25rem; font-weight: 600; }
        input[type="number"], input[type="text"], select { 
            width: 100%; border: 1px solid #d1d5db; border-radius: 8px; padding: 0.5rem; font-size: 1rem; 
        }
        .readonly-field { background-color: #f9fafb; font-weight: bold; color: #111827; }
        .nav-bottom { position: fixed; bottom: 0; width: 100%; background: white; border-top: 1px solid #e5e7eb; display: flex; justify-content: space-around; padding: 0.75rem 0; }
        .btn-cash { background-color: #10b981; color: white; padding: 0.5rem 1rem; border-radius: 8px; font-weight: bold; }
    </style>
</head>
<body class="pb-20">

    <header class="bg-blue-600 text-white p-4 sticky top-0 z-50 shadow-md">
        <div class="flex justify-between items-center">
            <h1 class="text-xl font-bold">ErjonPro</h1>
            <span id="current-date" class="text-sm bg-blue-700 px-3 py-1 rounded-full">21/01/2026</span>
        </div>
    </header>

    <main class="p-4 max-w-md mx-auto">
        
        <section class="card">
            <label>Seleziona Giorno / Mese</label>
            <input type="date" id="data-input" value="2026-01-21" class="mb-2">
        </section>

        <section class="card">
            <h2 class="text-lg font-bold mb-3 border-b pb-2 text-blue-600"><i class="fa-solid fa-arrow-trend-up"></i> Inserimento Entrate</h2>
            <div class="input-group">
                <label>Corrispettivi (Vendite Totali)</label>
                <input type="number" id="corr-totali" placeholder="0.00" oninput="calculateAll()">
            </div>
            <div class="grid grid-cols-2 gap-3">
                <div class="input-group">
                    <label>Bancomat</label>
                    <input type="number" class="elettr" id="bancomat" placeholder="0.00" oninput="calculateAll()">
                </div>
                <div class="input-group">
                    <label>Satispay</label>
                    <input type="number" class="elettr" id="satispay" placeholder="0.00" oninput="calculateAll()">
                </div>
                <div class="input-group">
                    <label>App</label>
                    <input type="number" class="elettr" id="app" placeholder="0.00" oninput="calculateAll()">
                </div>
                <div class="input-group">
                    <label>Delivery</label>
                    <input type="number" class="elettr" id="delivery" placeholder="0.00" oninput="calculateAll()">
                </div>
            </div>
        </section>

        <section class="card">
            <h2 class="text-lg font-bold mb-3 border-b pb-2 text-red-600"><i class="fa-solid fa-truck"></i> Spese Fornitori</h2>
            <div id="supplier-list">
                <div class="grid grid-cols-12 gap-2 mb-2 items-end">
                    <div class="col-span-6"><label>Fornitore</label><input type="text" placeholder="Nome"></div>
                    <div class="col-span-4"><label>Importo</label><input type="number" class="sup-amount" oninput="calculateAll()"></div>
                    <div class="col-span-2 text-center"><label>Cash</label><input type="checkbox" class="sup-cash" onchange="calculateAll()"></div>
                </div>
            </div>
            <button class="text-sm text-blue-500 font-bold mt-2">+ Aggiungi Fornitore</button>
            <div class="mt-4 p-2 bg-gray-50 rounded-lg">
                <div class="flex justify-between text-sm"><span>Totale Fornitori:</span> <span id="tot-fornitori">€ 0.00</span></div>
                <div class="flex justify-between text-sm font-bold text-green-600"><span>Pagato Cash:</span> <span id="tot-cash-fornitori">€ 0.00</span></div>
            </div>
        </section>

        <section class="card border-t-4 border-blue-500">
            <h2 class="text-lg font-bold mb-3 text-gray-800"><i class="fa-solid fa-building-columns"></i> Riconciliazione Cassa & Banca</h2>
            
            <div class="space-y-2">
                <div class="flex justify-between p-2 bg-blue-50 rounded">
                    <span class="text-sm">Elettronici (Teorici):</span>
                    <span id="calc-elettronici" class="font-bold">€ 0.00</span>
                </div>
                <div class="flex justify-between p-2 bg-yellow-50 rounded">
                    <span class="text-sm">Contanti Teorici:</span>
                    <span id="calc-contanti-teorici" class="font-bold">€ 0.00</span>
                </div>
                <div class="flex justify-between p-2 bg-green-50 rounded">
                    <span class="text-sm italic">Contanti Netti (dopo spese):</span>
                    <span id="calc-contanti-netti" class="font-bold">€ 0.00</span>
                </div>
                <hr>
                <div class="input-group">
                    <label>Versato Contanti (Banca)</label>
                    <input type="number" id="versato-contanti" placeholder="0.00" oninput="calculateAll()">
                </div>
                <div class="flex justify-between p-2 bg-red-100 rounded text-red-700">
                    <span class="text-sm font-bold text-black">Mancante da Versare:</span>
                    <span id="calc-mancante" class="font-bold">€ 0.00</span>
                </div>
            </div>
        </section>

        <section class="card">
            <label>Note del Giorno</label>
            <textarea class="w-full border rounded-lg p-2 text-sm" rows="3" placeholder="Scrivi qui eventuali anomalie..."></textarea>
        </section>

    </main>

    <nav class="nav-bottom">
        <a href="#" class="flex flex-col items-center text-blue-600 text-xs">
            <i class="fa-solid fa-calendar-day text-xl"></i> Oggi
        </a>
        <a href="#" class="flex flex-col items-center text-gray-400 text-xs">
            <i class="fa-solid fa-list-check text-xl"></i> Registro
        </a>
        <a href="#" class="flex flex-col items-center text-gray-400 text-xs">
            <i class="fa-solid fa-chart-pie text-xl"></i> Dashboard
        </a>
        <a href="#" class="flex flex-col items-center text-gray-400 text-xs">
            <i class="fa-solid fa-print text-xl"></i> Stampe
        </a>
    </nav>

    <script>
        function calculateAll() {
            // 1. Entrate
            const corrTotali = parseFloat(document.getElementById('corr-totali').value) || 0;
            const bancomat = parseFloat(document.getElementById('bancomat').value) || 0;
            const satispay = parseFloat(document.getElementById('satispay').value) || 0;
            const app = parseFloat(document.getElementById('app').value) || 0;
            const delivery = parseFloat(document.getElementById('delivery').value) || 0;

            const totElettronici = bancomat + satispay + app + delivery;
            document.getElementById('calc-elettronici').innerText = `€ ${totElettronici.toFixed(2)}`;

            // 2. Fornitori
            let totFornitori = 0;
            let totCashFornitori = 0;
            const rows = document.querySelectorAll('#supplier-list > div');
            rows.forEach(row => {
                const amount = parseFloat(row.querySelector('.sup-amount').value) || 0;
                const isCash = row.querySelector('.sup-cash').checked;
                totFornitori += amount;
                if (isCash) totCashFornitori += amount;
            });
            document.getElementById('tot-fornitori').innerText = `€ ${totFornitori.toFixed(2)}`;
            document.getElementById('tot-cash-fornitori').innerText = `€ ${totCashFornitori.toFixed(2)}`;

            // 3. Cassa
            const contantiTeorici = corrTotali - totElettronici;
            document.getElementById('calc-contanti-teorici').innerText = `€ ${contantiTeorici.toFixed(2)}`;

            const contantiNetti = contantiTeorici - totCashFornitori;
            document.getElementById('calc-contanti-netti').innerText = `€ ${contantiNetti.toFixed(2)}`;

            const versatoBanca = parseFloat(document.getElementById('versato-contanti').value) || 0;
            const mancante = contantiNetti - versatoBanca;
            document.getElementById('calc-mancante').innerText = `€ ${mancante.toFixed(2)}`;
        }
    </script>
</body>
</html>
